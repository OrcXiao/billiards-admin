(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0373c29e"],{2745:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"signature-wrap"},[o("div",[o("el-form",{attrs:{inline:!0}},[o("el-form-item",{staticClass:"mg-l10",attrs:{label:"球房名称:"}},[o("el-input",{attrs:{clearable:"",placeholder:"请输入球房名称"},model:{value:t.condition.name,callback:function(e){t.$set(t.condition,"name","string"===typeof e?e.trim():e)},expression:"condition.name"}})],1),o("el-form-item",{staticClass:"mg-l10",attrs:{label:"创建日期:"}},[o("el-date-picker",{staticClass:"w300",attrs:{type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.condition.timeRang,callback:function(e){t.$set(t.condition,"timeRang","string"===typeof e?e.trim():e)},expression:"condition.timeRang"}})],1),o("el-form-item",{staticClass:"mg-l20"},[o("el-button",{on:{click:function(e){return t.Mixin_handleCurrentChange(1)}}},[t._v("查询")]),o("el-button",{attrs:{type:"primary"},on:{click:t.clickAddBtn}},[t._v("新增")])],1)],1)],1),o("div",[t._v("总计: "+t._s(t.Mixin_total)+"家")]),o("div",{staticClass:"mg-t20"},[o("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),o("el-table-column",{attrs:{prop:"id",label:"球房ID"}}),o("el-table-column",{attrs:{prop:"name",label:"球房名称"}}),o("el-table-column",{attrs:{label:"所在地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.province)+t._s(e.row.city)+t._s(e.row.area)+" ")]}}])}),o("el-table-column",{attrs:{prop:"address",label:"详细地址"}}),o("el-table-column",{attrs:{prop:"chargingRules",label:"收费规则"}}),o("el-table-column",{attrs:{width:"180",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("Filter_FormatDate")(e.row.createDate))+" ")]}}])}),o("el-table-column",{attrs:{prop:"state",width:"120",label:"活动"}}),o("el-table-column",{attrs:{prop:"address",width:"200",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{loading:e.row.buttonLoading,type:"primary"},on:{click:function(o){return t.clickEditBtn(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{type:"danger"},on:{click:function(o){return t.clickRemoveBtn(e.row)}}},[t._v("删除")])]}}])})],1),o("el-row",{staticClass:"mg-t20"},[o("el-col",{attrs:{offset:8,span:8}},[o("el-pagination",{attrs:{"page-size":t.Mixin_pageSize,layout:"prev, pager, next, jumper",total:t.Mixin_total},on:{"current-change":t.Mixin_handleCurrentChange}})],1)],1)],1),o("el-dialog",{attrs:{title:"add"===t.currentHandle?"新增球房":"编辑球房",visible:t.isShowRoomDialog,width:"1000px"},on:{"update:visible":function(e){t.isShowRoomDialog=e},close:function(e){return t.Mixin_dialogClose("room","isShowRoomDialog")}}},[o("el-form",{ref:"room",attrs:{model:t.room,rules:t.roomRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"球房名称 :",prop:"name"}},[o("el-input",{attrs:{maxlength:"20",placeholder:"请输入球房名称"},model:{value:t.room.name,callback:function(e){t.$set(t.room,"name","string"===typeof e?e.trim():e)},expression:"room.name"}})],1),o("el-form-item",{attrs:{label:"球房经度 :",prop:"longitude"}},[o("el-input",{attrs:{placeholder:"请输入球房经度"},model:{value:t.room.longitude,callback:function(e){t.$set(t.room,"longitude","string"===typeof e?e.trim():e)},expression:"room.longitude"}})],1),o("el-form-item",{attrs:{label:"球房纬度 :",prop:"latitude"}},[o("el-input",{attrs:{placeholder:"请输入球房纬度"},model:{value:t.room.latitude,callback:function(e){t.$set(t.room,"latitude","string"===typeof e?e.trim():e)},expression:"room.latitude"}})],1),o("el-form-item",{attrs:{label:"收费规则 :",prop:"charge"}},[o("el-input",{attrs:{placeholder:"请输入收费规则",type:"textarea"},model:{value:t.room.charge,callback:function(e){t.$set(t.room,"charge","string"===typeof e?e.trim():e)},expression:"room.charge"}})],1),o("el-form-item",{attrs:{label:"球房设备 :",prop:"equipment"}},[o("el-input",{attrs:{placeholder:"请输入球房设备",type:"textarea"},model:{value:t.room.equipment,callback:function(e){t.$set(t.room,"equipment","string"===typeof e?e.trim():e)},expression:"room.equipment"}})],1),o("el-form-item",{attrs:{label:"所在地区 :",prop:"area"}},[o("el-cascader",{staticClass:"wd100",attrs:{placeholder:"请选择所在地区",options:t.options,props:t.props},model:{value:t.room.area,callback:function(e){t.$set(t.room,"area","string"===typeof e?e.trim():e)},expression:"room.area"}})],1),o("el-form-item",{attrs:{label:"具体地址 :",prop:"address"}},[o("el-input",{attrs:{placeholder:"请输入具体地址"},model:{value:t.room.address,callback:function(e){t.$set(t.room,"address","string"===typeof e?e.trim():e)},expression:"room.address"}})],1),o("el-form-item",{attrs:{label:"球房图片 :",prop:"img"}},[o("div",{staticClass:"fs14 clff0000"},[t._v("第一张图为球房头像图")]),o("div",{staticClass:"dis-fl fl-wp"},[o("CmUpload",{staticClass:"mg-r10 mg-b10",attrs:{"upload-name":"imgOne",initObj:t.room.imgOne},on:{uploadSuccess:t.uploadSuccess}}),o("CmUpload",{staticClass:"mg-r10 mg-b10",attrs:{"upload-name":"imgTwo",initObj:t.room.imgTwo},on:{uploadSuccess:t.uploadSuccess}}),o("CmUpload",{staticClass:"mg-r10 mg-b10",attrs:{"upload-name":"imgThree",initObj:t.room.imgThree},on:{uploadSuccess:t.uploadSuccess}}),o("CmUpload",{staticClass:"mg-r10 mg-b10",attrs:{"upload-name":"imgFour",initObj:t.room.imgFour},on:{uploadSuccess:t.uploadSuccess}}),o("CmUpload",{staticClass:"mg-r10 mg-b10",attrs:{"upload-name":"imgFive",initObj:t.room.imgFive},on:{uploadSuccess:t.uploadSuccess}}),o("CmUpload",{staticClass:"mg-r10 mg-b10",attrs:{"upload-name":"imgSix",initObj:t.room.imgSix},on:{uploadSuccess:t.uploadSuccess}})],1)]),o("el-form-item",{attrs:{label:"球房活动 :",prop:"activity"}},[o("editor-bar",{attrs:{isClear:t.isClear},model:{value:t.room.activity,callback:function(e){t.$set(t.room,"activity",e)},expression:"room.activity"}})],1)],1),o("div",{staticClass:"mt10 dis-fl ju-ct"},[o("el-button",{attrs:{loading:t.submitButtonLoading,type:"primary"},on:{click:function(e){return t.submitRoomBtn("room")}}},[t._v("确定")]),o("el-button",{on:{click:function(e){t.isShowRoomDialog=!1}}},[t._v("取消")])],1)],1)],1)},a=[],r=(o("4160"),o("b0c0"),o("159b"),o("96cf"),o("1da1")),n=o("a897"),l={name:"room",data:function(){var t=function(t,e,o){""===e?o(new Error("11")):o()};return{props:{value:"text",label:"text",children:"children"},condition:{area:"",name:"",createTime:"",integral:""},tableData:[],isShowRoomDialog:!1,room:{name:"",longitude:"",latitude:"",charge:"",activity:"",equipment:"",area:"",address:"",imgOne:"",imgTwo:"",imgThree:"",imgFour:"",imgFive:"",imgSix:""},roomRules:{name:{required:!0,validator:this.$verifys.nullStr({item:"球房名称"}),trigger:"blur"},longitude:{required:!0,validator:this.$verifys.nullStr({item:"球房经度"}),trigger:"blur"},latitude:{required:!0,validator:this.$verifys.nullStr({item:"球房纬度"}),trigger:"blur"},charge:{required:!0,validator:this.$verifys.nullStr({item:"收费规则"}),trigger:"blur"},activity:{required:!0,validator:this.$verifys.nullStr({item:"球房活动"}),trigger:"blur"},equipment:{required:!0,validator:this.$verifys.nullStr({item:"球房设备"}),trigger:"blur"},area:{required:!0,validator:this.$verifys.nullStr({item:"所在地区"}),trigger:"blur"},address:{required:!0,validator:this.$verifys.nullStr({item:"具体地址"}),trigger:"blur"},img:{required:!0,validator:t,trigger:"blur"}},currentHandle:"",submitButtonLoading:!1,isClear:!1}},computed:{options:function(){return this.$store.state.vx_allCity}},created:function(){},mounted:function(){var t=this;this.$nextTick((function(){t.initData()}))},methods:{initData:function(){var t=this,e={name:this.condition.name,currentPage:this.Mixin_currentPage,pageSize:this.Mixin_pageSize};this.condition.timeRang&&(e.startDate=this.condition.timeRang[0],e.stopDate=this.condition.timeRang[1]+86399999),this.$api.room.getRooms(e).then((function(e){e.data&&0===e.data.resultCode&&(e.data.data.records.forEach((function(t,e){t.buttonLoading=!1})),t.tableData=e.data.data.records,t.Mixin_total=e.data.data.total)}))},clickAddBtn:function(){this.currentHandle="add",this.isShowRoomDialog=!0,this.room={name:"",longitude:"",latitude:"",charge:"",activity:"",equipment:"",area:"",address:"",imgOne:"",imgTwo:"",imgThree:"",imgFour:"",imgFive:"",imgSix:""}},clickEditBtn:function(t){var e=this;this.currentHandle="edit",t.buttonLoading=!0,this.$api.room.getRoomById(t.id).then((function(o){if(t.buttonLoading=!1,o.data&&0===o.data.resultCode){var i=o.data.data;e.room.id=i.id,e.room.name=i.name,e.room.longitude=i.longitude,e.room.latitude=i.latitude,e.room.charge=i.chargingRules,e.room.activity=i.activity,e.room.equipment=i.facilities,e.room.address=i.address,e.room.imgOne=i.imgOne,e.room.imgTwo=i.imgTwo,e.room.imgThree=i.imgThree,e.room.imgFour=i.imgFour,e.room.imgFive=i.imgFive,e.room.imgSix=i.imgSix,e.room.area=[i.province,i.city,i.area],e.isShowRoomDialog=!0}}))},uploadSuccess:function(t){this.room[t.uploadName]=t.imgSrc},submitRoomBtn:function(t){var e=this;this.$refs[t].validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(o){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o&&(e.submitButtonLoading=!0,"add"===e.currentHandle?(i={activity:e.room.activity,chargingRules:e.room.charge,facilities:e.room.equipment,latitude:parseFloat(e.room.latitude),longitude:parseFloat(e.room.longitude),name:e.room.name,province:e.room.area[0],city:e.room.area[1],area:e.room.area[2],address:e.room.address,imgOne:e.room.imgOne,imgTwo:e.room.imgTwo,imgThree:e.room.imgThree,imgFour:e.room.imgFour,imgFive:e.room.imgFive,imgSix:e.room.imgSix},delete e.room.id,e.$api.room.addRoom(i).then((function(t){e.submitButtonLoading=!1,t.data&&0===t.data.resultCode&&(e.$message.success("新增球房成功"),e.initData(),e.isShowRoomDialog=!1)}))):(a={id:e.room.id,activity:e.room.activity,chargingRules:e.room.charge,facilities:e.room.equipment,latitude:parseFloat(e.room.latitude),longitude:parseFloat(e.room.longitude),name:e.room.name,province:e.room.area[0],city:e.room.area[1],area:e.room.area[2],address:e.room.address,imgOne:e.room.imgOne,imgTwo:e.room.imgTwo,imgThree:e.room.imgThree,imgFour:e.room.imgFour,imgFive:e.room.imgFive,imgSix:e.room.imgSix},e.$api.room.addRoom(a).then((function(t){e.submitButtonLoading=!1,t.data&&0===t.data.resultCode&&(e.$message.success("修改球房成功"),e.initData(),e.isShowRoomDialog=!1)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},clickRemoveBtn:function(t,e){var o=this;this.$confirm("确定删除当前球房 ?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$api.room.delRoom(t.id).then((function(t){t.data&&0===t.data.resultCode&&(o.$message.success("球房删除成功"),o.Mixin_handleCurrentChange(1))}))})).catch((function(){}))}},props:{},watch:{},mixins:[],filters:{},components:{EditorBar:n["a"]}},s=l,m=o("2877"),c=Object(m["a"])(s,i,a,!1,null,"57731191",null);e["default"]=c.exports},b0c0:function(t,e,o){var i=o("83ab"),a=o("9bf2").f,r=Function.prototype,n=r.toString,l=/^\s*function ([^ (]*)/,s="name";i&&!(s in r)&&a(r,s,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-0373c29e.fd106ed1.js.map